# 包一机


### 主数据： 

`类别` ：
1. 产品  原材料
2. 工序
3. 设备


`问题`： 
1. 每个产品是否只需要一个原材料， 还是中间会加原材料
2. 确定好每个产品的工序和设备， 各自的编码
3. 刻码规则？

### 工单app：
前端给后端传的字段：
1. 产品
2. 个数
3. 设备  （针对这个产品 工艺路线的设备）
4. 开始时间 截止时间

工单管理app  还要加一个页面，导入库存的excel入库。不断地覆盖mongo的表

### 工序app：
1. 选择设备 再选择一个工单，点击开始加工。
2. 可以查看这个设备、 这个工单 **历史** 的工序数据（之前所有的mark） **实时** （正在处理的mark）
3. 前端传递给后端的参数：
    1. 工单
    2. 设备
    3. mark


`问题`：
1. 2个设备共用一个工控机app。 怎么判断扫码是哪个设备的？？   目前先假设一个设备一个工控机来做。
2. 每一个设备一个连接地址。不按照种类。



### 追溯查询app
1. 根据刻码mark查出记录
2. 大屏展示


### 后端存储的数据结构：
```
from bson import ObjectId
# complete_count 和 per_count 计算：
# 50/4=12..2  知道已经完成了12个mark的数据， 此次录入的是第13个mark的op2的开始时间。

{'_id': ObjectId('worksheetid'),
     'device_1':{
         'material': '',
         'complete_count': 50, # 已经完成了多少次扫码
         'per_count': 4, # 每个刻码零件需要在这个设备上扫几次码

         'data': [{
             'mark': '',
             'op1': {'start_time':'', 'end_time':''},
             'op2': {'start_time':'', 'end_time':''}
         },
         {'mark':  ''},
         {},
         ]

     },
     'device_2':{}}

```